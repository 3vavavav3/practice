<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Авторизация</title>
</head>
<body>
    <h1>Автосервис "АвтоТранс"</h1>
    <h2>Вход в систему</h2>

    <label for="username">Логин:</label>
    <br>
    <input type="text" id="username" placeholder="Введите логин"/>
    <br>
    <label for="password">Пароль:</label>
    <br>
    <input type="password" id="password" placeholder="Введите пароль">
    <br><br>

    <button onclick="login()">Войти</button>
    <br>
    <a href="registrationPage.html">Зарегистрироваться</a>

    <script>
        function login() {
            let username = document.getElementById("username").value;
            let password = document.getElementById("password").value;

            let response = await fetch('/api/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    username: username,
                    password: password
                })
            });

            if (response.ok) {
                let userData = await response.json();
                localStorage.setItem('currentUser', JSON.stringify(userData));

                alert("Доброе пожаловать, " + userData.name);
                window.location.href = "mainPage.html";
            }
        }



    </script>


</body>
</html>